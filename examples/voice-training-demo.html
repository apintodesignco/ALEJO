<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ALEJO Voice Training Demo</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background-color: #fff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    header {
      text-align: center;
      margin-bottom: 30px;
    }
    h1 {
      color: #2196f3;
      margin-bottom: 10px;
    }
    .description {
      color: #666;
      margin-bottom: 30px;
    }
    #alejo-voice-training-container {
      margin-top: 30px;
    }
    .footer {
      margin-top: 40px;
      text-align: center;
      font-size: 14px;
      color: #666;
    }
    .security-info {
      background-color: #e8f5e9;
      padding: 15px;
      border-radius: 4px;
      margin-top: 30px;
    }
    .security-info h3 {
      margin-top: 0;
      color: #388e3c;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ALEJO Voice Training Demo</h1>
      <p class="description">
        This demo showcases ALEJO's advanced voice training capabilities, including voice recognition, 
        emotional tone analysis, and speech pattern learning.
      </p>
    </header>

    <div id="alejo-voice-training-container"></div>

    <div class="security-info">
      <h3>Privacy & Security</h3>
      <p>
        All voice processing happens locally in your browser. Your voice data is never sent to external servers
        unless you explicitly enable cloud backup. ALEJO's security layer ensures that only authorized users
        can access voice training features.
      </p>
    </div>

    <div class="footer">
      <p>ALEJO - Advanced Learning Engine with Judgment and Observation</p>
      <p>Â© 2025 ALEJO AI</p>
    </div>
  </div>

  <!-- Load required scripts -->
  <script type="module">
    import { initialize } from '../src/personalization/voice/index.js';
    import trainingUI from '../src/personalization/voice/training-ui.js';
    import * as security from '../src/security/index.js';

    // Initialize security with demo user
    async function initDemo() {
      try {
        // Initialize security first
        await security.initialize({
          userId: 'demo-user',
          securityLevel: 'medium'
        });

        // Grant necessary permissions for the demo
        await security.rbac.assignRole('demo-user', 'voice_training_user');
        
        // Initialize voice system
        await initialize({
          userId: 'demo-user'
        });

        // Initialize UI
        await trainingUI.initialize({
          containerId: 'alejo-voice-training-container',
          theme: 'light',
          showAdvancedFeatures: true,
          showEmotionAnalysis: true,
          showSpeechPatterns: true,
          requiredSamples: 3, // Reduced for demo purposes
          sampleDuration: 2000 // 2 seconds for demo
        });

        console.log('ALEJO Voice Training Demo initialized successfully');
      } catch (error) {
        console.error('Failed to initialize demo:', error);
        document.getElementById('alejo-voice-training-container').innerHTML = `
          <div class="error-message">
            <h3>Initialization Error</h3>
            <p>${error.message}</p>
            <p>Please check the console for more details.</p>
          </div>
        `;
      }
    }

    // Start demo when page loads
    window.addEventListener('DOMContentLoaded', initDemo);
  </script>
</body>
</html>
